# ğŸš€ TokenèŠ‚çœæ¨¡å¼ - å¿«é€Ÿå¼€å§‹

## ä¸€å¥è¯æ€»ç»“
**å¼€å‘æµ‹è¯•æ—¶å¯ç”¨Mockæ¨¡å¼ï¼Œtokenæ¶ˆè€—ä»Â¥1/æ¬¡é™ä¸ºÂ¥0ï¼**

---

## ç«‹å³å¯ç”¨ï¼ˆ3æ­¥ï¼‰

### Step 1: ç¼–è¾‘é…ç½®æ–‡ä»¶
```bash
cd apps/teamventure/src/backend/python-ai-service

# ç¼–è¾‘ .env.localï¼ˆå¦‚æœä¸å­˜åœ¨åˆ™å¤åˆ¶ .env.exampleï¼‰
vi .env.local

# å°†è¿™è¡Œæ”¹ä¸º true
ENABLE_AI_MOCK=true
```

### Step 2: é‡å¯PythonæœåŠ¡
```bash
cd apps/teamventure

# æ–¹å¼1: ä½¿ç”¨Makefileï¼ˆæ¨èï¼‰
make restart

# æ–¹å¼2: æ‰‹åŠ¨é‡å¯
docker compose restart python-ai-service
```

### Step 3: éªŒè¯ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
```bash
# æ–¹å¼1: ä½¿ç”¨Makefile
make logs-python

# æ–¹å¼2: æ‰‹åŠ¨æŸ¥çœ‹
docker compose logs python-ai-service | grep -i "mock\|stub"

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# INFO: AI Mockæ¨¡å¼å·²å¯ç”¨ï¼Œä½¿ç”¨ç¡®å®šæ€§stubç”Ÿæˆï¼ˆèŠ‚çœtokenï¼‰
```

---

## æ•ˆæœå¯¹æ¯”

| æ¨¡å¼ | Tokenæ¶ˆè€— | å“åº”é€Ÿåº¦ | æ•°æ®è´¨é‡ | é€‚ç”¨åœºæ™¯ |
|------|----------|---------|---------|---------|
| **Mockæ¨¡å¼** | 0 | <100ms | ç¡®å®šæ€§mock | åŠŸèƒ½å¼€å‘ã€UIæµ‹è¯•ã€å‰ç«¯è”è°ƒ |
| **ç¼“å­˜æ¨¡å¼** | é¦–æ¬¡æ­£å¸¸ï¼Œåç»­0 | é¦–æ¬¡~3sï¼Œåç»­<100ms | çœŸå®AI | é›†æˆæµ‹è¯•ã€é‡å¤æµ‹è¯• |
| **çœŸå®æ¨¡å¼** | æ¯æ¬¡~Â¥0.4 | ~3s | çœŸå®AI | AIè´¨é‡æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ |

---

## å¿«æ·å‘½ä»¤ï¼ˆæ¨èï¼‰

```bash
cd apps/teamventure

# å¯ç”¨Mockæ¨¡å¼ï¼ˆtoken = 0ï¼‰
make mock-on && make restart

# å…³é—­Mockæ¨¡å¼ï¼ˆä½¿ç”¨çœŸå®AIï¼‰
make mock-off && make restart

# æŸ¥çœ‹tokenä½¿ç”¨ç»Ÿè®¡
make token-stats

# æŸ¥çœ‹AIç¼“å­˜æƒ…å†µ
make cache-stats

# æ¸…ç©ºç¼“å­˜ï¼ˆé‡æ–°æµ‹è¯•AIç”Ÿæˆè´¨é‡ï¼‰
make cache-clear
```

---

## å¸¸è§é—®é¢˜

### Q1: Mockæ¨¡å¼ä¼šå½±å“åŠŸèƒ½æµ‹è¯•å—ï¼Ÿ
A: **ä¸ä¼š**ã€‚Mockæ•°æ®å®Œå…¨ç¬¦åˆAPI schemaï¼Œå¯ä»¥æ­£å¸¸æµ‹è¯•ï¼š
- å‰ç«¯å°ç¨‹åºäº¤äº’
- æ•°æ®åº“è¯»å†™
- APIæ¥å£æ ¼å¼
- ä¸šåŠ¡æµç¨‹é€»è¾‘

å”¯ä¸€åŒºåˆ«æ˜¯æ–¹æ¡ˆå†…å®¹æ˜¯ç¡®å®šæ€§çš„ï¼ˆä¸æ˜¯AIç”Ÿæˆçš„ï¼‰ï¼Œä½†æ•°æ®ç»“æ„å®Œå…¨ä¸€è‡´ã€‚

### Q2: ä»€ä¹ˆæ—¶å€™éœ€è¦å…³é—­Mockï¼Ÿ
A: åªæœ‰åœ¨ä»¥ä¸‹åœºæ™¯éœ€è¦å…³é—­ï¼š
- æµ‹è¯•AIç”Ÿæˆè´¨é‡ï¼ˆæ–¹æ¡ˆæ˜¯å¦åˆç†ã€è¯­è¨€æ˜¯å¦è‡ªç„¶ï¼‰
- éªŒè¯ä¸åŒè¾“å…¥ä¸‹çš„AIå“åº”å·®å¼‚
- å‡†å¤‡ä¸Šçº¿å‰çš„æœ€ç»ˆéªŒè¯

### Q3: ç¼“å­˜ä¼šå¯¼è‡´æµ‹è¯•æ•°æ®ä¸å‡†ç¡®å—ï¼Ÿ
A: åªè¦è¾“å…¥å‚æ•°æœ‰ä»»ä½•å˜åŒ–ï¼ˆäººæ•°ã€å¤©æ•°ã€åœ°ç‚¹ã€é¢„ç®—ã€åå¥½ï¼‰ï¼Œå°±ä¼šè§¦å‘æ–°çš„AIè°ƒç”¨ã€‚ç¼“å­˜åªå¯¹**å®Œå…¨ç›¸åŒ**çš„è¾“å…¥ç”Ÿæ•ˆã€‚

å¦‚æœéœ€è¦å¼ºåˆ¶é‡æ–°ç”Ÿæˆï¼Œè¿è¡Œï¼š`make cache-clear`

### Q4: ç”Ÿäº§ç¯å¢ƒèƒ½ç”¨Mockæ¨¡å¼å—ï¼Ÿ
A: **ç»å¯¹ä¸èƒ½ï¼** ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½®ï¼š
```bash
ENABLE_AI_MOCK=false  # å¿…é¡»ä½¿ç”¨çœŸå®AI
AI_CACHE_ENABLED=true # å¯ç”¨ç¼“å­˜é™ä½æˆæœ¬
AI_CACHE_TTL_SECONDS=3600  # ç¼“å­˜1å°æ—¶
```

---

## é¢„æœŸèŠ‚çœæ•ˆæœ

### å¼€å‘é˜¶æ®µï¼ˆä½ çš„æƒ…å†µï¼‰
å‡è®¾æ¯å¤©æµ‹è¯•50æ¬¡ï¼š

| æ¨¡å¼ | æ—¥æ¶ˆè€— | å‘¨æ¶ˆè€— | æœˆæ¶ˆè€— |
|------|-------|-------|-------|
| **ä¼˜åŒ–å‰** | Â¥50 | Â¥350 | Â¥1500 |
| **Mockæ¨¡å¼** | Â¥0 | Â¥0 | Â¥0 |
| **ç¼“å­˜æ¨¡å¼** | Â¥10 | Â¥70 | Â¥300 |

**ç»“è®º**: Mockæ¨¡å¼æ¯æœˆèŠ‚çœ **Â¥1500**ï¼

### é¢å¤–æ”¶ç›Š
- âš¡ å“åº”é€Ÿåº¦ä»3ç§’é™ä¸º<100msï¼ˆå¿«30å€ï¼‰
- ğŸ¯ å®Œå…¨å¯é¢„æµ‹çš„æµ‹è¯•ç»“æœï¼ˆæ— AIéšæœºæ€§ï¼‰
- ğŸ”’ æ— éœ€æ‹…å¿ƒAPI keyæ³„éœ²

---

## ä¸‹ä¸€æ­¥

1. âœ… ç«‹å³å¯ç”¨Mockæ¨¡å¼ï¼ˆæŒ‰ä¸Šæ–¹Step 1-3æ“ä½œï¼‰
2. ğŸ“Š ä¸€å‘¨åæŸ¥çœ‹tokenèŠ‚çœæ•ˆæœï¼ˆ`make token-stats`ï¼‰
3. ğŸ“š éœ€è¦æ·±å…¥äº†è§£ï¼Ÿé˜…è¯»å®Œæ•´æ–‡æ¡£ï¼š`docs/AI_TOKEN_OPTIMIZATION.md`

---

**æœ€åæ›´æ–°**: 2026-01-15
**ç»´æŠ¤è€…**: TeamVenture Dev Team
