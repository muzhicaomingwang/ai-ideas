<!--pages/profile/profile.wxml-->
<view class="profile-page">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar">
      <image wx:if="{{userInfo.avatar || userInfo.avatarUrl}}" src="{{userInfo.avatar || userInfo.avatarUrl}}" mode="aspectFill" />
      <text wx:else class="avatar-placeholder">ğŸ‘¤</text>
    </view>
    <view class="user-info">
      <view class="user-name">{{userInfo.nickname || userInfo.nickName || 'ç‚¹å‡»ç™»å½•'}}</view>
      <view class="user-id" wx:if="{{userInfo.user_id || userInfo.userId}}">ID: {{userInfo.user_id || userInfo.userId}}</view>
    </view>
    <view class="login-btn" wx:if="{{!isLoggedIn}}" bindtap="handleLogin">
      ç™»å½• â†’
    </view>
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="stats-section">
    <view class="stat-item">
      <view class="stat-number">{{stats.totalPlans}}</view>
      <view class="stat-label">ç”Ÿæˆæ–¹æ¡ˆ</view>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <view class="stat-number">{{stats.favoritePlans}}</view>
      <view class="stat-label">æ”¶è—æ–¹æ¡ˆ</view>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <view class="stat-number">{{stats.completedPlans}}</view>
      <view class="stat-label">å·²å®Œæˆ</view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-group">
      <view class="menu-item" bindtap="handleGoMyPlans">
        <view class="menu-icon">ğŸ“‹</view>
        <view class="menu-text">æˆ‘çš„æ–¹æ¡ˆ</view>
        <view class="menu-arrow">â†’</view>
      </view>
      <view class="menu-item" bindtap="handleGoFavorites">
        <view class="menu-icon">â­</view>
        <view class="menu-text">æˆ‘çš„æ”¶è—</view>
        <view class="menu-arrow">â†’</view>
      </view>
      <view class="menu-item" bindtap="handleGoHistory">
        <view class="menu-icon">ğŸ•</view>
        <view class="menu-text">æµè§ˆå†å²</view>
        <view class="menu-arrow">â†’</view>
      </view>
    </view>

    <view class="menu-group">
      <view class="menu-item" bindtap="handleGoSettings">
        <view class="menu-icon">âš™ï¸</view>
        <view class="menu-text">è®¾ç½®</view>
        <view class="menu-arrow">â†’</view>
      </view>
      <view class="menu-item" bindtap="handleGoHelp">
        <view class="menu-icon">â“</view>
        <view class="menu-text">å¸®åŠ©ä¸åé¦ˆ</view>
        <view class="menu-arrow">â†’</view>
      </view>
      <view class="menu-item" bindtap="handleGoAbout">
        <view class="menu-icon">â„¹ï¸</view>
        <view class="menu-text">å…³äºæˆ‘ä»¬</view>
        <view class="menu-arrow">â†’</view>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
  </view>
</view>
