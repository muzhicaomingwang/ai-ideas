<!--pages/login/login.wxml-->
<view class="login-page">
  <!-- Logo 和标题 -->
  <view class="header">
    <view class="logo">
      <text class="logo-text">TV</text>
    </view>
    <view class="title">TeamVenture</view>
    <view class="subtitle">AI驱动的团建策划助手</view>
  </view>

  <!-- 功能亮点 -->
  <view class="features">
    <view class="feature-item">
      <view class="feature-icon">⚡</view>
      <view class="feature-text">15分钟生成方案</view>
    </view>
    <view class="feature-item">
      <view class="feature-icon">💰</view>
      <view class="feature-text">成本降低50%+</view>
    </view>
    <view class="feature-item">
      <view class="feature-icon">🎯</view>
      <view class="feature-text">智能供应商匹配</view>
    </view>
  </view>

  <!-- 未登录状态 -->
  <view class="login-section" wx:if="{{!isLogin && !showUserForm}}">
    <button
      class="btn-wechat-login"
      bindtap="handleWechatLogin"
    >
      <text class="wechat-icon">🔐</text>
      <text>微信一键登录</text>
    </button>
    <!-- 游客入口 -->
    <view class="guest-entry" bindtap="handleGuestMode">
      <text class="guest-text">先逛逛</text>
      <text class="guest-arrow">→</text>
    </view>
  </view>

  <!-- 用户信息填写表单 -->
  <view class="user-form" wx:if="{{showUserForm}}">
    <view class="form-title">完善个人信息</view>

    <!-- 头像选择 -->
    <view class="form-item">
      <view class="form-label">头像</view>
      <button
        class="avatar-wrapper"
        open-type="chooseAvatar"
        bindchooseavatar="onChooseAvatar"
      >
        <image class="avatar" src="{{avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="avatar-tip">点击选择头像</view>
      </button>
    </view>

    <!-- 昵称输入 -->
    <view class="form-item">
      <view class="form-label">昵称</view>
      <input
        class="nickname-input"
        type="nickname"
        placeholder="请输入昵称"
        value="{{nickname}}"
        bindinput="onNicknameInput"
        bindblur="onNicknameBlur"
      />
    </view>

    <!-- 完成按钮 -->
    <button class="btn-complete" bindtap="handleCompleteLogin">
      完成登录
    </button>
  </view>

  <!-- 已登录状态 -->
  <view class="login-section" wx:if="{{isLogin}}">
    <button
      class="btn-continue"
      bindtap="handleContinue"
    >
      继续使用
    </button>
  </view>

  <!-- 用户协议 -->
  <view class="agreement">
    <checkbox-group bindchange="handleAgreementChange">
      <label class="agreement-label">
        <checkbox value="agree" checked="{{agreed}}" color="#1890ff"/>
        <text class="agreement-text">
          我已阅读并同意
          <text class="link" bindtap="handleShowAgreement" data-type="user">《用户协议》</text>
          和
          <text class="link" bindtap="handleShowAgreement" data-type="privacy">《隐私政策》</text>
        </text>
      </label>
    </checkbox-group>
  </view>

  <!-- 装饰元素 -->
  <view class="decoration-circle decoration-circle-1"></view>
  <view class="decoration-circle decoration-circle-2"></view>
</view>
