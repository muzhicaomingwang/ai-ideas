<!--pages/home/home.wxml-->
<view class="home-page">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar">
    <!-- çŠ¶æ€æ å ä½ -->
    <view class="status-bar" style="height: {{statusBarHeight}}px;"></view>
    <!-- å¯¼èˆªæ å†…å®¹ -->
    <view class="navbar-content">
      <view class="navbar-title">é¦–é¡µ</view>
      <!-- å³ä¾§ç”¨æˆ·ä¿¡æ¯ -->
      <view class="navbar-user" bindtap="handleUserAvatar">
        <view wx:if="{{isLogin && userInfo}}" class="user-info-mini">
          <image wx:if="{{userInfo.avatar}}" class="user-avatar-mini" src="{{userInfo.avatar}}" mode="aspectFill"></image>
          <view wx:else class="user-avatar-mini user-avatar-placeholder">
            <text class="avatar-emoji">ğŸ‘¤</text>
          </view>
          <text class="user-nickname-mini">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
        </view>
        <view wx:else class="login-btn-mini">
          <text>ç™»å½•</text>
        </view>
      </view>
    </view>
  </view>

  <!-- Banner åŒºåŸŸ -->
  <view class="banner" style="padding-top: {{statusBarHeight + 44 + 40}}px;">
    <view class="banner-content">
      <view class="banner-title">TeamVenture</view>
      <view class="banner-subtitle">AI é©±åŠ¨çš„æ™ºèƒ½å›¢å»ºæ–¹æ¡ˆç”Ÿæˆå¹³å°</view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-card" bindtap="handleGoGenerate">
      <view class="action-icon">âœ¨</view>
      <view class="action-title">ç”Ÿæˆæ–¹æ¡ˆ</view>
      <view class="action-desc">AI ä¸ºæ‚¨å®šåˆ¶å›¢å»ºæ–¹æ¡ˆ</view>
    </view>
    <view class="action-card" bindtap="handleGoMyPlans">
      <view class="action-icon">ğŸ“‹</view>
      <view class="action-title">æˆ‘çš„æ–¹æ¡ˆ</view>
      <view class="action-desc">æŸ¥çœ‹å†å²æ–¹æ¡ˆ</view>
    </view>
  </view>

  <!-- çƒ­é—¨ç›®çš„åœ° -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">çƒ­é—¨ç›®çš„åœ°</view>
      <view class="section-more" bindtap="handleViewMoreDestinations">
        æ›´å¤š â†’
      </view>
    </view>
    <scroll-view class="destinations-scroll" scroll-x>
      <view
        wx:for="{{hotDestinations}}"
        wx:key="id"
        class="destination-card"
        bindtap="handleSelectDestination"
        data-destination="{{item.name}}"
      >
        <view class="destination-image">
          <text class="destination-emoji">{{item.emoji}}</text>
        </view>
        <view class="destination-name">{{item.name}}</view>
        <view class="destination-tag">{{item.tag}}</view>
      </view>
    </scroll-view>
  </view>

  <!-- æ¨èæ–¹æ¡ˆ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">æ¨èæ–¹æ¡ˆ</view>
      <view class="section-more" bindtap="handleViewMorePlans">
        æ›´å¤š â†’
      </view>
    </view>
    <view class="recommended-plans">
      <view
        wx:for="{{recommendedPlans}}"
        wx:key="id"
        class="plan-card-mini"
        bindtap="handleViewPlanTemplate"
        data-plan-id="{{item.id}}"
      >
        <view class="plan-header-mini">
          <view class="plan-name-mini">{{item.name}}</view>
          <view class="plan-price-mini">Â¥{{item.pricePerPerson}}/äººèµ·</view>
        </view>
        <view class="plan-tags-mini">
          <text wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this" class="tag-mini">{{tag}}</text>
        </view>
        <view class="plan-stats-mini">
          <text class="stat-mini">{{item.duration}}</text>
          <text class="divider-mini">|</text>
          <text class="stat-mini">{{item.destination}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ´»åŠ¨ç±»å‹æ¨è -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">æ´»åŠ¨ç±»å‹</view>
    </view>
    <view class="activity-types">
      <view
        wx:for="{{activityTypes}}"
        wx:key="value"
        class="activity-type-card"
        bindtap="handleSelectActivityType"
        data-type="{{item.value}}"
      >
        <view class="activity-type-icon">{{item.emoji}}</view>
        <view class="activity-type-name">{{item.label}}</view>
      </view>
    </view>
  </view>
</view>
